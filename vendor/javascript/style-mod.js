const e="Í¼";const t="undefined"==typeof Symbol?"__"+e:Symbol.for(e);const l="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet");const s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class StyleModule{constructor(e,t){this.rules=[];let{finish:l}=t||{};function splitSelector(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function render(e,t,s,o){let n=[],i=/^@(\w+)\b/.exec(e[0]),r=i&&"keyframes"==i[1];if(i&&null==t)return s.push(e[0]+";");for(let l in t){let o=t[l];if(/&/.test(l))render(l.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),o,s);else if(o&&"object"==typeof o){if(!i)throw new RangeError("The value of a property ("+l+") should be a primitive value.");render(splitSelector(l),o,n,r)}else null!=o&&n.push(l.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+o+";")}(n.length||r)&&s.push((!l||i||o?e:e.map(l)).join(", ")+" {"+n.join(" ")+"}")}for(let t in e)render(splitSelector(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let l=s[t]||1;s[t]=l+1;return e+l.toString(36)}static mount(e,t,s){let o=e[l],n=s&&s.nonce;o?n&&o.setNonce(n):o=new StyleSet(e,n);o.mount(Array.isArray(t)?t:[t])}}let o=new Map;class StyleSet{constructor(e,t){let s=e.ownerDocument||e,n=s.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let t=o.get(s);if(t){e.adoptedStyleSheets=[t.sheet,...e.adoptedStyleSheets];return e[l]=t}this.sheet=new n.CSSStyleSheet;e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets];o.set(s,this)}else{this.styleTag=s.createElement("style");t&&this.styleTag.setAttribute("nonce",t);let l=e.head||e;l.insertBefore(this.styleTag,l.firstChild)}this.modules=[];e[l]=this}mount(e){let t=this.sheet;let l=0,s=0;for(let o=0;o<e.length;o++){let n=e[o],i=this.modules.indexOf(n);if(i<s&&i>-1){this.modules.splice(i,1);s--;i=-1}if(-1==i){this.modules.splice(s++,0,n);if(t)for(let e=0;e<n.rules.length;e++)t.insertRule(n.rules[e],l++)}else{while(s<i)l+=this.modules[s++].rules.length;l+=n.rules.length;s++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}export{StyleModule};

